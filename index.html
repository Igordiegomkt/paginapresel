<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Carregando...</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Aguarde um momento, estamos te redirecionando.">
  <meta property="og:title" content="Carregando...">
  <meta property="og:description" content="Aguarde um momento, estamos te redirecionando.">
  <meta property="og:image" content="https://seusite.com/imagem.jpg">

  <style>
    body {
      background-color: #000;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-family: Arial, sans-serif;
      flex-direction: column;
      margin: 0;
    }
    h1 {
      font-size: 18px;
      text-align: center;
    }
    .spinner {
      border: 5px solid #444;
      border-top: 5px solid #00FF00;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin-top: 20px;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>

  <!-- Google Tag Manager -->
  <script>
    (function(w,d,s,l,i){
      w[l]=w[l]||[];
      w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
      var f=d.getElementsByTagName(s)[0],
          j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
      j.async=true;
      j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
      f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MT6B5TBD');
  </script>
  <!-- End Google Tag Manager -->

  <!-- Captura de UTMs sem UTMify -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const params = new URLSearchParams(window.location.search);
      const queryString = params.toString();
      const destinoBase = "https://webhook-cf.zapsafe.work/webhook/b";
      const destino = destinoBase + (queryString ? "?" + queryString : "");

      // Salva UTMs no localStorage (para análise posterior)
      const utmParams = {};
      for (const [key, value] of params.entries()) {
        if (key.startsWith("utm_")) {
          utmParams[key] = value;
        }
      }
      if (Object.keys(utmParams).length > 0) {
        localStorage.setItem("utm_data", JSON.stringify(utmParams));
      }

      // Espera o GTM carregar antes de redirecionar (ótimo para Facebook Ads)
      setTimeout(() => {
        window.location.href = destino;
      }, 900); // 0.9s — tempo seguro para pixel registrar
    });
  </script>
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MT6B5TBD"
      height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript>

  <h1>Carregando, aguarde...</h1>
  <div class="spinner"></div>
</body>
</html>
